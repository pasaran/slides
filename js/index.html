<!doctype html>
<html lang="en-us">
<head>
    <title>Core JavaScript</title>
    <meta charset="utf-8"/>
    <!--
    <meta name="viewport" content="width=1274, user-scalable=no"/>
    -->
    <link rel="stylesheet" href="../ribbon/styles/screen.css"/>
    <style>
    .slide p {
        margin-bottom: 25px;
        display: inline;
    }
    .slide pre {
        margin-bottom: 25px;
    }
    .slide>div {
        padding-top: 60px;
    }
    .slide:after {
        display: none;
    }
    .slide pre code {
        -line-height: 1.7;
    }
    .slide pre code:before {
        content: '';
    }
    /*
    .slide section:before {
        display: none;
    }
    */
    </style>
</head>

<body class="list">
    <header class="caption">
        <h1>Core JavaScript</h1>
    </header>

    <div class="slide" id="slide-1"><div><section>

<header><h2>Книги</h2></header>

<p><em>David Flanagan</em> <br />
JavaScript: The Definitive Guide</p>

<p><em>Douglas Crockford</em> <br />
JavaScript: The Good Parts</p>

</section></div></div>

    <div class="slide" id="slide-2"><div><section>

<header><h2>Типы данных</h2></header>

<ul>
<li><code>Number</code></li>
<li><code>Boolean</code></li>
<li><code>String</code></li>
<li><code>Object</code></li>
<li><code>Array</code></li>
<li><code>Function</code></li>
</ul>

</section></div></div>

    <div class="slide" id="slide-3"><div><section>

<header><h2>Number</h2></header>

<pre><code>var a = 42;
var b = -3.1415;
var c = 1e+3;
var d = 0xff;
var e = 077;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-4"><div><section>

<header><h2>Number</h2></header>

<ul>
<li>IEEE 754</li>
<li>64-bit float</li>
<li><code>0.1 + 0.2 !== 0.3</code></li>
<li>Целые от <code>-2^53</code> до <code>2^53</code></li>
<li><code>Math.pow( 2, 53 ) + 1 === Math.pow( 2, 53 )</code></li>
</ul>

</section></div></div>

    <div class="slide" id="slide-5"><div><section>

<header><h2>Number</h2></header>

<pre><code>Infinity, +Infinity, -Infinity
+0, -0
NaN

+0 === -0
1/( +0 ) !== 1/( -0 )
NaN !== NaN
</code></pre>

</section></div></div>

    <div class="slide" id="slide-6"><div><section>

<header><h2>Boolean</h2></header>

<ul>
<li><code>true</code></li>
<li><code>false</code></li>
</ul>

<p>Есть и другие falsy values. См. ниже.</p>

</section></div></div>

    <div class="slide" id="slide-7"><div><section>

<header><h2>String</h2></header>

<pre><code>var a = "Hello";
var b = 'World';
var c = '\n\\\'\"';
</code></pre>

</section></div></div>

    <div class="slide" id="slide-8"><div><section>

<header><h2>String</h2></header>

<pre><code>//  Плохо.
var d = 'Hello, \
    World';

//  Хорошо.
var e = 'Hello, ' +
    'World';
</code></pre>

</section></div></div>

    <div class="slide" id="slide-9"><div><section>

<header><h2>String</h2></header>

<pre><code>var a = 'Hello';

a.length                    //  5
a.charAt( 2 )               //  'l'
a[ 2 ]                      //  'l'
a.indexOf( 'l' )            //  2
a.indexOf( 'x' )            //  -1
a.slice( 2, 4 )             //  'll'
</code></pre>

</section></div></div>

    <div class="slide" id="slide-10"><div><section>

<header><h2>null и undefined</h2></header>

<pre><code>var x = null;

var y;
y                           //  undefined
var x = {};
x.foo                       //  undefined

var z = undefined;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-11"><div><section>

<header><h2>null и undefined</h2></header>

<pre><code>null == undefined
null !== undefined

x == null
x === null || x === undefined
</code></pre>

</section></div></div>

    <div class="slide" id="slide-12"><div><section>

<header><h2>Falsy values</h2></header>

<pre><code>false
0
''
null
undefined
NaN
</code></pre>

</section></div></div>

    <div class="slide" id="slide-13"><div><section>

<header><h2>Truthy value</h2></header>

<pre><code>[]
{}
'0'
</code></pre>

</section></div></div>

    <div class="slide" id="slide-14"><div><section>

<header><h2>== vs ===</h2></header>

<pre><code>0 === ''                    //  false
0 == ''                     //  true
</code></pre>

<p>Всегда используем <code>===</code> за исключением:</p>

<pre><code>x == null
</code></pre>

</section></div></div>

    <div class="slide" id="slide-15"><div><section>

<header><h2>В JS все — объекты</h2></header>

<p>Все, да не все. Не объекты:</p>

<pre><code>null
undefined
</code></pre>

<p>Псевдо-объекты:</p>

<pre><code>String
Number
Boolean
</code></pre>

</section></div></div>

    <div class="slide" id="slide-16"><div><section>

<header><h2>Wrapper object</h2></header>

<pre><code>'Hello'.length              //  5
200..toFixed( 2 )           //  '200.00'
true.toString()             //  'true'

var s = 'Hello';
s.foo = 42;
s.foo                       //  undefined
</code></pre>

<p>Строки — immutable.</p>

</section></div></div>

    <div class="slide" id="slide-17"><div><section>

<header><h2>Wrapper object</h2></header>

<pre><code>var x = new Boolean( false );
x.foo = 42;
x.foo                       //  42
x.valueOf()                 //  false
Boolean( x )                //  true
typeof x                    //  'object'
</code></pre>

</section></div></div>

    <div class="slide" id="slide-18"><div><section>

<header><h2>Wrapper object</h2></header>

<p>Никогда не используем:</p>

<pre><code>new String( x )
new Boolean( x )
new Number( x )
</code></pre>

</section></div></div>

    <div class="slide" id="slide-19"><div><section>

<header><h2>Object</h2></header>

<pre><code>var o = {
    foo: 42,
    ' ': 24,

    get_foo: function() {
        return this.foo;
    }
};

var empty = {};
</code></pre>

</section></div></div>

    <div class="slide" id="slide-20"><div><section>

<header><h2>Object</h2></header>

<pre><code>o.foo
o[ ' ' ]
o.bar                       //  undefined

o.get_foo()

o.quu = 24;
o.foo = 'Hello';
</code></pre>

</section></div></div>

    <div class="slide" id="slide-21"><div><section>

<header><h2>Object</h2></header>

<pre><code>var o = { foo: 42 };
o.foo = undefined;
o.foo                       //  undefined
'foo' in o                  //  true

var o = { foo: 42 };
delete o.foo;
o.foo                       //  undefined
'foo' in o                  //  false
</code></pre>

</section></div></div>

    <div class="slide" id="slide-22"><div><section>

<header><h2>Object</h2></header>

<p>Итерация по объекту:</p>

<pre><code>for ( var key in o ) {
    console.log( key, o[ key ] );
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-23"><div><section>

<header><h2>Object</h2></header>

<p>Есть определенный порядок ключей при итерации.</p>

<pre><code>var a = { foo: 42, bar: 24 };

var b = {};
b.foo = 42;
b.foo = 24;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-24"><div><section>

<header><h2>Object</h2></header>

<p>Но числовые ключи сортируются специально.</p>

<pre><code>var o = {
    foo: 42,
    '42': 'foo',
    bar: 24,
    '24': 'bar'
}
//  24, 42, 'foo', 'bar'
</code></pre>

</section></div></div>

    <div class="slide" id="slide-25"><div><section>

<header><h2>Object</h2></header>

<pre><code>var a = { foo: 42 };
var b = a;

b.bar = 24;
a.bar                       //  24
a === b                     //  true
</code></pre>

</section></div></div>

    <div class="slide" id="slide-26"><div><section>

<header><h2>Object</h2></header>

<pre><code>var a = { foo: 42 };
var b = { foo: 42 };

a === b                     //  false
</code></pre>

</section></div></div>

    <div class="slide" id="slide-27"><div><section>

<header><h2>Array</h2></header>

<pre><code>var a = [ 1, 2, 3 ];
var b = [ 1, 2, 3, ];
var c = [ 1, 'Hello', true, null, undefined ];
var d = [ , , , ];

var empty = [];
</code></pre>

</section></div></div>

    <div class="slide" id="slide-28"><div><section>

<header><h2>Array</h2></header>

<pre><code>var a = [ 1, 2, 3 ];
a.length                    //  3

a[ 0 ]                      //  1
a[ 5 ]                      //  undefined

a[ 5 ] = 6;
a.length                    //  6;
a[ 4 ]                      //  undefined
</code></pre>

</section></div></div>

    <div class="slide" id="slide-29"><div><section>

<header><h2>Array</h2></header>

<pre><code>var a = [];
a[ 1000 ] = 1;
a.length                    //  1001
a[ 500 ]                    //  undefined

a[ '2000' ] = 2;
a.length                    //  2001
</code></pre>

</section></div></div>

    <div class="slide" id="slide-30"><div><section>

<header><h2>Array</h2></header>

<pre><code>var a = [ 1, 2, 3 ];
a.length                    //  3
a.foo = 42;
a.foo                       //  42
a.length                    //  3
</code></pre>

</section></div></div>

    <div class="slide" id="slide-31"><div><section>

<header><h2>Array</h2></header>

<pre><code>for ( var x in a ) {
    console.log( x, a[ x ] );
}

for ( var i = 0, l = a.length; i &lt; l; i++ ) {
    console.log( i, a[ x ] );
}

a.forEach( console.log );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-32"><div><section>

<header><h2>Array</h2></header>

<pre><code>var o = {
    0: 1,
    1: 2,
    2: 3
};
o[ 0 ]                      //  1
o.length                    //  undefined
</code></pre>

</section></div></div>

    <div class="slide" id="slide-33"><div><section>

<header><h2>Array</h2></header>

<pre><code>var a = [ 1, 2, 3 ];
delete a[ 1 ];

a[ 1 ]                      //  undefined
1 in a                      //  false
a.length                    //  3
</code></pre>

</section></div></div>

    <div class="slide" id="slide-34"><div><section>

<header><h2>Array</h2></header>

<pre><code>var a = [ 1, 2 ];
a.push( 3 );
a.push( 4, 9 );
a.length                    //  5
a.pop()                     //  9
a.length                    //  4
a.shift( 6 );
a                           //  [ 6, 1, 2, 3, 4 ]
a.unshift()                 //  6
</code></pre>

</section></div></div>

    <div class="slide" id="slide-35"><div><section>

<header><h2>Array</h2></header>

<p>Другие полезные методы массива:</p>

<pre><code>sort
join
slice
splice
concat
indexOf
map
</code></pre>

</section></div></div>

    <div class="slide" id="slide-36"><div><section>

<header><h2>Function</h2></header>

<pre><code>function add( a, b ) {
    return a + b;
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-37"><div><section>

<header><h2>Function</h2></header>

<pre><code>var add = function( a, b ) {
    return a + b;
}

add.foo = 42;
add.foo                     //  42
</code></pre>

</section></div></div>

    <div class="slide" id="slide-38"><div><section>

<header><h2>Где кто</h2></header>

<p>Как узнать, что за значение у нас есть.
Число это, или строка, или массив или еще что.</p>

<pre><code>===
typeof
instanceof
Array.isArray

Object.prototype.toString.call
</code></pre>

</section></div></div>

    <div class="slide" id="slide-39"><div><section>

<header><h2>Где кто. Number</h2></header>

<pre><code>typeof x === 'number'
</code></pre>

<p>Но:</p>

<pre><code>typeof NaN === 'number'
</code></pre>

</section></div></div>

    <div class="slide" id="slide-40"><div><section>

<header><h2>Где кто. String, Boolean, Function</h2></header>

<pre><code>typeof x === 'string'
typeof x === 'boolean'
typeof x === 'function'
</code></pre>

</section></div></div>

    <div class="slide" id="slide-41"><div><section>

<header><h2>Где кто. null и undefined</h2></header>

<pre><code>x === null
x === undefined
</code></pre>

<p>При этом:</p>

<pre><code>typeof undefined === 'undefined'
typeof null === 'object'
</code></pre>

</section></div></div>

    <div class="slide" id="slide-42"><div><section>

<header><h2>Где кто. RegExp</h2></header>

<pre><code>x instanceof RegExp
</code></pre>

</section></div></div>

    <div class="slide" id="slide-43"><div><section>

<header><h2>Где кто. Array</h2></header>

<pre><code>Array.isArray( x )
</code></pre>

<p>При этом <code>x instanceof Array</code> работает с проблемами.</p>

</section></div></div>

    <div class="slide" id="slide-44"><div><section>

<header><h2>Где кто. Object</h2></header>

<pre><code>typeof x === 'object'
</code></pre>

<p>Но:</p>

<pre><code>typeof null === 'object'
typeof [] === 'object'
typeof /foo/ === 'object'
</code></pre>

</section></div></div>

    <div class="slide" id="slide-45"><div><section>

<header><h2>Где кто</h2></header>

<pre><code>switch ( typeof x ) {
    case 'number': ...
    case 'string': ...
    case 'boolean': ...
    case 'function': ...
    case 'object':
        if ( Array.isArray() ) { ... }
        else if ( x ) { ... }
        else { ... }
</code></pre>

</section></div></div>

    <div class="slide" id="slide-46"><div><section>

<header><h2>Где кто. Foo</h2></header>

<pre><code>x instanceof Foo
</code></pre>

<p>При этом:</p>

<pre><code>typeof x === 'object'
</code></pre>

</section></div></div>

    <div class="slide" id="slide-47"><div><section>

<header><h2>Где кто</h2></header>

<pre><code>Object.prototype.toString.call( x )

'[object Object]'
'[object Array]'
...
</code></pre>

</section></div></div>

    <div class="slide" id="slide-48"><div><section>

<header><h2>Приведение типов</h2></header>

<pre><code>if ( x ) {
    ...
}

x + y

foo[ x ]
</code></pre>

</section></div></div>

    <div class="slide" id="slide-49"><div><section>

<header><h2>Приведение типов</h2></header>

<pre><code>[] + {}                     //  '[object Object]'
{} + []                     //  0
</code></pre>

</section></div></div>

    <div class="slide" id="slide-50"><div><section>

<header><h2>Приведение типов. String</h2></header>

<pre><code>x.toString()
String( x )
'' + x                      //  Не рекомендуется.


null.toString()
undefined.toString()

var y = { toString: function() { return 'Fooooo!' } };
</code></pre>

</section></div></div>

    <div class="slide" id="slide-51"><div><section>

<header><h2>Приведение типов. String</h2></header>

<pre><code>var x = { foo: 42 };

String( x )                 //  '[object Object]'
JSON.stringify( x )         //  '{"foo":42}'
</code></pre>

</section></div></div>

    <div class="slide" id="slide-52"><div><section>

<header><h2>Приведение типов. Boolean</h2></header>

<pre><code>Boolean( x )
!!x

x
</code></pre>

</section></div></div>

    <div class="slide" id="slide-53"><div><section>

<header><h2>Приведение типов. Number</h2></header>

<pre><code>Number( x )
+x

parseInt( x, 10 )
parseFloat( x )

Number( '42foo' )           //  NaN
parseInt( '42foo' )         //  42
</code></pre>

</section></div></div>

    <div class="slide" id="slide-54"><div><section>

<header><h2>JSON</h2></header>

<ul>
<li>Number literal</li>
<li>String literal</li>
<li>Object literal</li>
<li>Array literal</li>
<li><code>true</code>, <code>false</code>, <code>null</code></li>
</ul>

</section></div></div>

    <div class="slide" id="slide-55"><div><section>

<header><h2>JSON</h2></header>

<pre><code>{
    "foo": 42,
    "bar": {
        "quu": [ "Hello", true ],
        "boo": null
    }
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-56"><div><section>

<header><h2>JSON</h2></header>

<pre><code>JSON.parse( x )
JSON.stringify( x )

x.toJSON()
</code></pre>

</section></div></div>

    <div class="slide" id="slide-57"><div><section>

<header><h2>Определение переменных</h2></header>

<pre><code>var a = 42;
var b;
var c;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-58"><div><section>

<header><h2>Определение переменных</h2></header>

<pre><code>var a = 42, b, c;

var a = 42,
    b,
    c;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-59"><div><section>

<header><h2>Определение переменных</h2></header>

<pre><code>var a = 42;
//  var b = 24;
var c = a + b;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-60"><div><section>

<header><h2>Определение переменных</h2></header>

<pre><code>var a;
typeof a === 'undefined'    //  true
a === undefined             //  true

typeof b === 'undefined'    //  true
b === undefined             //  ReferenceError:
                            //      b is not defined
</code></pre>

</section></div></div>

    <div class="slide" id="slide-61"><div><section>

<header><h2>Определение переменных</h2></header>

<pre><code>var a = 42;
b = 24;
var c = a + b;

global.b                    //  24
</code></pre>

</section></div></div>

    <div class="slide" id="slide-62"><div><section>

<header><h2>Function</h2></header>

<pre><code>function add( a, b ) {
    return a + b;
}

var c = add( 2, 3 );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-63"><div><section>

<header><h2>Function</h2></header>

<pre><code>function foo( x ) {
    if ( !x ) {
        return;
    }

    return x + 1;
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-64"><div><section>

<header><h2>Function</h2></header>

<pre><code>function doFoo() {
    doBar();
}

var result = doFoo();       //  undefined

doFoo();
</code></pre>

</section></div></div>

    <div class="slide" id="slide-65"><div><section>

<header><h2>Function</h2></header>

<pre><code>function foo() {
    return
    {
        foo: 42
    };
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-66"><div><section>

<header><h2>Function</h2></header>

<p>Hoisting:</p>

<pre><code>var c = add( 2, 3 );

function add( a, b ) {
    return a + b;
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-67"><div><section>

<header><h2>Function</h2></header>

<pre><code>function foo( x ) {
    if ( x ) bar( x - 1 );
}
function bar( x ) {
    if ( x ) foo( x - 1 );
}

foo( 10 );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-68"><div><section>

<header><h2>Scope</h2></header>

<pre><code>function foo() {
    var a = 42;

    console.log( a );
}

foo();
console.log( a );           //  ReferenceError
</code></pre>

</section></div></div>

    <div class="slide" id="slide-69"><div><section>

<header><h2>Scope</h2></header>

<pre><code>var a = 42;

function foo() {
    console.log( a );       //  42
}

foo();
console.log( a );           //  42
</code></pre>

</section></div></div>

    <div class="slide" id="slide-70"><div><section>

<header><h2>Scope</h2></header>

<pre><code>function foo() {
    var a = 42;
}
function bar() {
    console.log( a );       //  ReferenceError
}

foo();
bar();
</code></pre>

</section></div></div>

    <div class="slide" id="slide-71"><div><section>

<header><h2>Scope</h2></header>

<pre><code>var a = 42;

function foo() {
    console.log( a );       //  42
    a = 24;
}

foo();
console.log( a );           //  24
</code></pre>

</section></div></div>

    <div class="slide" id="slide-72"><div><section>

<header><h2>Scope</h2></header>

<pre><code>var a = 42;

function foo() {
    var a = 24;
    console.log( a );       //  24
}

foo();
console.log( a );           //  42
</code></pre>

</section></div></div>

    <div class="slide" id="slide-73"><div><section>

<header><h2>Scope</h2></header>

<pre><code>var a = 42;

function foo( a ) {
    console.log( a );       //  24
}

foo( 24 );
console.log( a );           //  42
</code></pre>

</section></div></div>

    <div class="slide" id="slide-74"><div><section>

<header><h2>Scope</h2></header>

<pre><code>var a = 42;
function foo() {
    var a = 24;
    function bar() {
        var a = 66;
    }
}

foo();
</code></pre>

</section></div></div>

    <div class="slide" id="slide-75"><div><section>

<header><h2>Scope</h2></header>

<pre><code>var a = 42;
function foo( a ) {
    console.log( a );       //  24
    var a = 66;
    console.log( a );       //  66
}

foo( 24 );
console.log( a );           //  42
</code></pre>

</section></div></div>

    <div class="slide" id="slide-76"><div><section>

<header><h2>Scope</h2></header>

<pre><code>var a = 42;
function foo() {
    var a = 24;
    function bar() {
        var a = 66;
    }
}

foo();
</code></pre>

<header><h2>Hoisting</h2></header>

<pre><code>console.log( a );           //  undefined

var a;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-77"><div><section>

<header><h2>Hoisting</h2></header>

<pre><code>console.log( a );           //  undefined

var a = 42;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-78"><div><section>

<header><h2>Hoisting</h2></header>

<pre><code>var a;

console.log( a );           //  undefined

a = 42;

console.log( a );           //  42
</code></pre>

</section></div></div>

    <div class="slide" id="slide-79"><div><section>

<header><h2>Hoisting</h2></header>

<pre><code>var a = 42;
console.log( a );           //  42
var a = 24;
console.log( a );           //  24
var a;
console.log( a );           //  24
a = 66;
console.log( a );           //  66
</code></pre>

</section></div></div>

    <div class="slide" id="slide-80"><div><section>

<header><h2>Hoisting</h2></header>

<pre><code>function foo() {
    return 42;
}

var bar = function() {
    return 24;
};
</code></pre>

</section></div></div>

    <div class="slide" id="slide-81"><div><section>

<header><h2>Hoisting</h2></header>

<pre><code>bar();                      //  TypeError:
                            //      bar is not a function

var bar = function() {
    return 24;
}

bar();
</code></pre>

</section></div></div>

    <div class="slide" id="slide-82"><div><section>

<header><h2>Scope</h2></header>

<pre><code>var a = 42;
if ( a ) {
    var b = 24;
}

var c = a + b;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-83"><div><section>

<header><h2>Scope</h2></header>

<pre><code>var a = 42;
var b;
if ( a ) {
    b = 24;
}

var c = a + b;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-84"><div><section>

<header><h2>Scope</h2></header>

<pre><code>for ( var i = 0; i &lt; 10; i++ ) {
    doFoo();
}

var j = i;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-85"><div><section>

<header><h2>Scope</h2></header>

<pre><code>var i;
for ( i = 0; i &lt; 10; i++ ) {
    doFoo();
}

var j = i;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-86"><div><section>

<header><h2>Closures</h2></header>

<pre><code>var a = 42;
function foo() {
    return a;
}

foo()                       //  42
a = 24;
foo()                       //  24
</code></pre>

</section></div></div>

    <div class="slide" id="slide-87"><div><section>

<header><h2>Closures</h2></header>

<pre><code>var inc = ( function() {
    var n = 0;
    return function() {
        return n++;
    }
} )();

inc()                       //  0
inc()                       //  1
</code></pre>

</section></div></div>

    <div class="slide" id="slide-88"><div><section>

<header><h2>Closures</h2></header>

<pre><code>for ( var i = 1; i &lt;= 10; i++ ) {
    setTimeout( function() {
        console.log( i );
    }, i * 1000 );
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-89"><div><section>

<header><h2>Closures</h2></header>

<pre><code>for ( var i = 1; i &lt;= 10; i++ ) {
    setTimeout( function() {
        console.log( i );
    }, i * 1000 );
}

console.log( i );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-90"><div><section>

<header><h2>Closures</h2></header>

<pre><code>for ( var i = 1; i &lt;= 10; i++ ) {
    ( function() {
        var j = i;
        setTimeout( function() {
            console.log( j );
        }, i * 1000 );
    } )();
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-91"><div><section>

<header><h2>Closures</h2></header>

<pre><code>for ( var i = 1; i &lt;= 10; i++ ) {
    ( function( i ) {
        setTimeout( function() {
            console.log( i );
        }, i * 1000 );
    } )( i );
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-92"><div><section>

<header><h2>Function</h2></header>

<p>Четыре способа вызвать функцию:</p>

<ul>
<li>Как функцию</li>
<li>Как метод</li>
<li><code>call</code>, <code>apply</code></li>
<li>Как конструктор</li>
</ul>

</section></div></div>

    <div class="slide" id="slide-93"><div><section>

<header><h2>Function</h2></header>

<pre><code>function sum( a, b ) {
    return a + b;
}

var c = sum( 2, 3 );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-94"><div><section>

<header><h2>Function</h2></header>

<pre><code>sum( 1 )                    //  NaN
//  a === 1, b === undefined
</code></pre>

</section></div></div>

    <div class="slide" id="slide-95"><div><section>

<header><h2>Function</h2></header>

<pre><code>function sum( a, b ) {
    b = b || 0;
    //  b = ( b === undefined ) ? 0 : b;

    return a + b;
}

sum( 1 )                    //  1
</code></pre>

</section></div></div>

    <div class="slide" id="slide-96"><div><section>

<header><h2>|| и &amp;&amp;</h2></header>

<pre><code>var a = b || c || d;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-97"><div><section>

<header><h2>|| и &amp;&amp;</h2></header>

<pre><code>var a;
if ( b ) {
    a = b;
} else if ( c ) {
    a = c;
} else {
    a = d;
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-98"><div><section>

<header><h2>|| и &amp;&amp;</h2></header>

<pre><code>var a = b &amp;&amp; c &amp;&amp; d;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-99"><div><section>

<header><h2>|| и &amp;&amp;</h2></header>

<pre><code>var a;
if ( !b ) {
    a = b;
} else if ( !c ) {
    a = c;
} else {
    a = d;
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-100"><div><section>

<header><h2>|| и &amp;&amp;</h2></header>

<pre><code>//  var a = o.foo.bar;
var a = o &amp;&amp; o.foo &amp;&amp; o.foo.bar;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-101"><div><section>

<header><h2>&amp;&amp; vs if</h2></header>

<pre><code>foo() &amp;&amp; bar();

if ( foo() ) {
    bar();
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-102"><div><section>

<header><h2>Function</h2></header>

<pre><code>sum( 1, 2, 3, 4, 5 )        //  3
//  a === 1, b === 2
</code></pre>

</section></div></div>

    <div class="slide" id="slide-103"><div><section>

<header><h2>Function</h2></header>

<pre><code>function sum() {
    var r = 0;
    for ( var i = 0; i &lt; arguments.length; i++ ) {
        r += arguments[ i ];
    }
    return r;
}

sum( 1, 2, 3, 4, 5 )        //  15
</code></pre>

</section></div></div>

    <div class="slide" id="slide-104"><div><section>

<header><h2>Function</h2></header>

<pre><code>function sum( a, b ) {
    console.log( a, arguments[ 0 ] );
    console.log( b, arguments[ 1 ] );
    console.log( arguments[ 2 ] );
    console.log( arguments[ 3 ] );
}

sum( 1, 2, 3 );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-105"><div><section>

<header><h2>Function</h2></header>

<pre><code>function foo( a ) {
    console.log( a );       //  42
    arguments[ 0 ] = 24;
    console.log( a );       //  24
}

foo( 42);
</code></pre>

</section></div></div>

    <div class="slide" id="slide-106"><div><section>

<header><h2>Function</h2></header>

<pre><code>function sum() {
    var args = Array.prototype.slice.call( arguments );
    //  var args = [].slice.call( arguments );

    //  var args = [].slice.call( arguments, 1 );
    ...
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-107"><div><section>

<header><h2>Function</h2></header>

<pre><code>var o = { foo: 42 };

function foo( o ) {
    o.bar = 24;
}

foo( o );
o.bar                       //  24
</code></pre>

</section></div></div>

    <div class="slide" id="slide-108"><div><section>

<header><h2>Function</h2></header>

<pre><code>var o = { foo: 42 };

function foo( o ) {
    o = { bar: 24 };
}

foo( o );
o.foo                       //  24
o.bar                       //  undefined
</code></pre>

</section></div></div>

    <div class="slide" id="slide-109"><div><section>

<header><h2>Methods</h2></header>

<pre><code>var o = {
    foo: 42,
    get_foo: function() {
        return this.foo;
    }
};

o.get_foo()                 //  42
</code></pre>

</section></div></div>

    <div class="slide" id="slide-110"><div><section>

<header><h2>Methods</h2></header>

<pre><code>var o = {
    set_foo: function( foo ) { this.foo = foo; },
    get_foo: function() { return this.foo; }
};

o.set_foo( 42 );
o.get_foo()                 //  42

o.foo = 42;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-111"><div><section>

<header><h2>Methods</h2></header>

<pre><code>var o = {
    _foo: 0,
    set_foo: function( foo ) { this._foo = foo; },
    get_foo: function() { return this._foo; }
};

//  Плохо!
o._foo = 42;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-112"><div><section>

<header><h2>Methods</h2></header>

<pre><code>var objs = [];
for ( var i = 0; i &lt; 10; i++ ) {
    objs[ i ] = {
        foo: i,
        get_foo: function() {
            return this.foo;
        }
    };
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-113"><div><section>

<header><h2>Methods</h2></header>

<pre><code>var o = {
    foo: 42,
    get_foo: function() { return this.foo; }
};

o.get_foo()                 //  42

var get_foo = o.get_foo;
get_foo()                   //  undefined
</code></pre>

</section></div></div>

    <div class="slide" id="slide-114"><div><section>

<header><h2>Methods</h2></header>

<pre><code>var get_foo = function() { return this.foo; };

var a = { foo: 42, get_foo: get_foo };
var b = { foo: 24, get_foo: get_foo };

a.get_foo();                //  42
b.get_foo();                //  24
get_foo();                  //  undefined
</code></pre>

</section></div></div>

    <div class="slide" id="slide-115"><div><section>

<header><h2>Methods</h2></header>

<pre><code>var o = {
    foo: {
        foo: { foo: 42, get_foo: get_foo },
        get_foo: get_foo
    },
    get_foo: get_foo
};

o.get_foo(), o.foo.get_foo(), o.foo.foo.get_foo()
</code></pre>

</section></div></div>

    <div class="slide" id="slide-116"><div><section>

<header><h2>call</h2></header>

<pre><code>function get_foo() { return this.foo; }
function set_foo( foo ) { this.foo = foo; }

var o = { foo: 42 };
get_foo.call( o )           //  42
set_foo.call( o, 24 );
o.foo                       //  24
get_foo.call( o )           //  24
</code></pre>

</section></div></div>

    <div class="slide" id="slide-117"><div><section>

<header><h2>apply</h2></header>

<pre><code>function sum() {
    var r = 0;
    for ( var i = 0; i &lt; arguments.length; i++ )
        r += arguments[ i ];
    return r;
}
var numbers = [ 1, 2, 3, 4, 5 ];
//  sum( [ 1, 2, 3, 4, 5 ] );
sum.apply( null, numbers );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-118"><div><section>

<header><h2>apply</h2></header>

<pre><code>function proxy_to_foo() {
    switch ( arguments.length ) {
        case 0: foo(); break;
        case 1: foo( arguments[0] ); break;
        case 2: foo( arguments[0], arguments[1] ); break;
        default: foo.apply( null, arguments );
    }
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-119"><div><section>

<header><h2>apply</h2></header>

<pre><code>function proxy_to_foo() {
    ...
    switch ( arguments.length ) {
        case 0: foo.call( that ); break;
        case 1: foo.call( that,  arguments[0] ); break;
        ...
        default: foo.apply( that, arguments );
    }
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-120"><div><section>

<header><h2>bind</h2></header>

<pre><code>function get_foo() { return this.foo; }
var my_get_foo = get_foo.bind( { foo: 42 } );

get_foo()                   //  undefined
my_get_foo()                //  42
my_get_foo.call( { foo: 24 } )
                            //  42
get_foo === my_get_foo      //  false
get_foo()                   //  undefined
</code></pre>

</section></div></div>

    <div class="slide" id="slide-121"><div><section>

<header><h2>bind</h2></header>

<pre><code>Foo.prototype.do_request = function() {
    $.ajax( this.url, ( function( result ) {
        this.result = result;
    } ).bind( this ) );
};
</code></pre>

</section></div></div>

    <div class="slide" id="slide-122"><div><section>

<header><h2>bind</h2></header>

<pre><code>Foo.prototype.do_request = function() {
    var that = this;
    $.ajax( this.url, function( result ) {
        that.result = result;
    } );
};
</code></pre>

</section></div></div>

    <div class="slide" id="slide-123"><div><section>

<header><h2>prototype</h2></header>

<pre><code>var a = { foo: 42 };

a.foo                       //  42
a.bar                       //  undefined
a.toString                  //  [Function: toString]
</code></pre>

</section></div></div>

    <div class="slide" id="slide-124"><div><section>

<header><h2>prototype</h2></header>

<pre><code>var a = { foo: 42 };

a.foo                       //  42
a.bar                       //  undefined

var b = { bar: 24 };
a.__proto__ = b;
a.bar                       //  24
</code></pre>

</section></div></div>

    <div class="slide" id="slide-125"><div><section>

<header><h2>prototype</h2></header>

<pre><code>a                   b
-------------       -------------
foo: 42             bar: 24
__proto__
</code></pre>

</section></div></div>

    <div class="slide" id="slide-126"><div><section>

<header><h2>prototype</h2></header>

<pre><code>'foo' in a                  //  true
'bar' in a                  //  true

a.hasOwnProperty( 'foo' )   //  true
a.hasOwnProperty( 'bar' )   //  false
</code></pre>

</section></div></div>

    <div class="slide" id="slide-127"><div><section>

<header><h2>prototype</h2></header>

<pre><code>b.bar = 66;
a.bar                       //  66
</code></pre>

</section></div></div>

    <div class="slide" id="slide-128"><div><section>

<header><h2>prototype</h2></header>

<pre><code>a                   b
-------------       -------------
foo: 42             bar: 66
__proto__
</code></pre>

</section></div></div>

    <div class="slide" id="slide-129"><div><section>

<header><h2>prototype</h2></header>

<pre><code>a.bar = 39;

a.bar                       //  39
b.bar                       //  66
a.hasOwnProperty( 'bar' )   //  true
</code></pre>

</section></div></div>

    <div class="slide" id="slide-130"><div><section>

<header><h2>prototype</h2></header>

<pre><code>a                   b
-------------       -------------
foo: 42             bar: 66
bar: 39
__proto__
</code></pre>

</section></div></div>

    <div class="slide" id="slide-131"><div><section>

<header><h2>prototype</h2></header>

<pre><code>delete a.bar;
a.bar                       //  66
a.hasOwnProperty( 'bar' )   //  false
</code></pre>

</section></div></div>

    <div class="slide" id="slide-132"><div><section>

<header><h2>prototype</h2></header>

<pre><code>var c = { quu: 88; }
b.__proto__ = c;

b.quu                       //  88
a.quu                       //  88
</code></pre>

</section></div></div>

    <div class="slide" id="slide-133"><div><section>

<header><h2>prototype</h2></header>

<pre><code>a                   b                   c
-------------       -------------       -------------
foo: 42             bar: 66             quu: 88
__proto__           __proto__
</code></pre>

</section></div></div>

    <div class="slide" id="slide-134"><div><section>

<header><h2>Object.prototype</h2></header>

<pre><code>c.__proto__ === Object.prototype

typeof Object               //  'function'
Object.prototype

c.toString === Object.prototype.toString

Object.prototype.__proto__ === null
</code></pre>

</section></div></div>

    <div class="slide" id="slide-135"><div><section>

<header><h2>Object.prototype</h2></header>

<pre><code>var a = {};

Object.prototype.foo = 42;

a.bar                       //  42
var b = {};
b.bar                       //  42
</code></pre>

</section></div></div>

    <div class="slide" id="slide-136"><div><section>

<header><h2>new Foo</h2></header>

<pre><code>function Foo( foo ) {
    this.foo = foo;
}
Foo.prototype.get_foo = function() {
    return this.foo;
};
var foo = new Foo( 42 );
foo instanceof Foo          //  true
</code></pre>

</section></div></div>

    <div class="slide" id="slide-137"><div><section>

<header><h2>new Foo</h2></header>

<pre><code>var foo = {};
foo.__proto__ = Foo.prototype;
Foo.call( foo, 42 );

foo instanceof Foo          //  true
</code></pre>

</section></div></div>

    <div class="slide" id="slide-138"><div><section>

<header><h2>instanceof</h2></header>

<pre><code>function instance_of( obj, ctor ) {
    while ( obj ) {
        if ( obj.__proto__ === ctor ) {
            return true;
        }
        obj = obj.__proto__;
    }
    return false;
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-139"><div><section>

<pre><code>new Foo             Foo.prototype       Object.prototype
-------------       -------------       -------------
foo: 42             get_foo()           __proto__
__proto__           __proto__

Foo                 Function.prototype
-------------       -------------
prototype           call()
__proto__           __proto__
</code></pre>

</section></div></div>

    <div class="slide" id="slide-140"><div><section>

<header><h2>Inheritance</h2></header>

<pre><code>function Foo1( foo ) { this.set_foo( foo ); }

Foo1.prototype.get_foo = function() {
    return this.foo;
};
Foo1.prototype.set_foo = function( foo ) {
    this.foo = foo;
};
</code></pre>

</section></div></div>

    <div class="slide" id="slide-141"><div><section>

<header><h2>Inheritance</h2></header>

<pre><code>function Foo2( foo ) { this.set_foo( foo ); }
//  Foo2.prototype = new Foo1();
Foo2.prototype.inc_foo = function() {
    this.foo++;
};
Foo2.prototype.set_foo = function( foo ) {
    if ( foo &lt; 0 ) { throw Error(); }
    this.foo = foo;
};
</code></pre>

</section></div></div>

    <div class="slide" id="slide-142"><div><section>

<header><h2>Inheritance</h2></header>

<pre><code>var foo2 = new Foo2( 42 );
foo2.get_foo
</code></pre>

</section></div></div>

    <div class="slide" id="slide-143"><div><section>

<header><h2>Inheritance</h2></header>

<pre><code>Foo2.prototype = { __proto__: Foo1.prototype };

Foo2.prototype = Object.create( Foo1.prototype );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-144"><div><section>

<header><h2>Inheritance</h2></header>

<pre><code>function Foo2( foo ) { Foo1.call( this, foo ); }
...
Foo2.prototype.set_foo = function( foo ) {
    if ( foo &lt; 0 ) { throw Error(); }
    Foo1.prototype.set_foo.call( this, foo );
};
</code></pre>

</section></div></div>

    <div class="slide" id="slide-145"><div><section>

<header><h2>inherit</h2></header>

<pre><code>function inherit( ctor, base ) {
    var F = function() {};
    F.prototype = base.prototype;
    var proto = ctor.prototype = new F();
    proto.super_ = base.prototype;
    proto.constructor = ctor;
    return ctor;
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-146"><div><section>

<header><h2>inherit</h2></header>

<pre><code>function Foo2( foo ) {
    this.super_.constructor.call( this, foo );
}
inherit( Foo2, Foo1 );
...
Foo2.prototype.set_foo = function( foo ) {
    if ( foo &lt; 0 ) { throw Error(); }
    this.super_.set_foo.call( this, foo );
};
</code></pre>

</section></div></div>

    <div class="slide" id="slide-147"><div><section>

<header><h2>inherit</h2></header>

<pre><code>Function Foo1( foo ) { this._init( foo ); }
Foo1.prototype._init = function( foo ) {
    this.foo = foo;
};

Function Foo2( foo ) { this._init( foo ); }
inherit( Foo2, Foo1 );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-148"><div><section>

<header><h2>Function as namespace</h2></header>

<pre><code>var Foo = function( foo ) { this._init( foo ); };

Foo.create = function( foo ) {
    return new Foo( foo );
};

Foo.Bar = function( bar ) { this._init( bar ); };
</code></pre>

</section></div></div>

    <div class="slide" id="slide-149"><div><section>

<header><h2>Functional programming</h2></header>

<pre><code>var a = [ 10, 1, 22, 5 ];
a.sort()                    //  [ 1, 10, 22, 5 ]

a.sort( function( a, b ) {  //  [ 1, 5, 10, 22 ]
    return a - b;
} );
a.sort( ( a, b ) =&gt; a - b );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-150"><div><section>

<header><h2>Functional programming</h2></header>

<pre><code>var a = [ 1, 2, 3, 4, 5 ];

a.map( x =&gt; x * x )         //  [ 1, 4, 9, 16, 25 ]
a.reduce( ( a, b ) =&gt; a + b )   //  15
</code></pre>

</section></div></div>

    <div class="slide" id="slide-151"><div><section>

<header><h2>forEach vs for</h2></header>

<pre><code>for ( var i = 0, l = array.length; i &lt; l; i++ ) {
    var item = array[ i ];
    do_something( item );
}

array.forEach( function( item, i ) {
    do_something( item, i );
} );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-152"><div><section>

<header><h2>reduce vs for</h2></header>

<pre><code>// lowercase headers names
this.options.headers = (options &amp;&amp; options.headers) ?
        Object.keys(this.options.headers).reduce(
            function(headers, headerName) {
                headers[headerName.toLowerCase()] =
                    options.headers[headerName];
                return headers;
            }, {}) :
        {};
</code></pre>

</section></div></div>

    <div class="slide" id="slide-153"><div><section>

<header><h2>reduce vs for</h2></header>

<pre><code>this.options.headers = {};
if ( options &amp;&amp; options.headers ) {
    for ( var headerName in options.headers ) {
        this.options.headers[ headerName.toLowerCase() ] =
            options.headers[ headerName ];
    }
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-154"><div><section>

<header><h2>Functional programming</h2></header>

<pre><code>setTimeout( function() {
    ...
}, 1000 );

$.ajax( url, function( result ) {
    ...
} );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-155"><div><section>

<header><h2>curry</h2></header>

<pre><code>var add = ( a, b ) =&gt; a + b;

add2 = function( b ) {
    return 2 + b;
};
add2( 3 )                   //  5
</code></pre>

</section></div></div>

    <div class="slide" id="slide-156"><div><section>

<header><h2>curry</h2></header>

<pre><code>function curry( f ) {
    return function( a ) {
        return function( b ) {
            return f( a, b );
        }
    }
}

curry( add )( 2 )( 3 );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-157"><div><section>

<header><h2>try / catch / throw</h2></header>

<pre><code>var object;
try {
    object = JSON.parse( string );
} catch ( e ) {
    //  Ошибка!
    //  object = {};
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-158"><div><section>

<header><h2>try / catch / throw</h2></header>

<pre><code>try {
    $.ajax( url, function( string ) {
        var object = JSON.parse( string );
    } );
} catch ( e ) {
    //  Ничего!
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-159"><div><section>

<header><h2>nextTick</h2></header>

<pre><code>var done = false;
setTimeout( function() {
    done = true;
}, 1000 );

while ( !done ) {
    do_something();
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-160"><div><section>

<header><h2>nextTick</h2></header>

<pre><code>&lt;html&gt;
&lt;body&gt;
&lt;script&gt;
    var foo = 42;
    do_something();
    function do_something() { do_something_else(); }
    $.ajax( url, function( result ) { ... } );
    ...
&lt;/script&gt;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-161"><div><section>

<header><h2>Node.js</h2></header>

<ul>
<li>V8</li>
<li>libuv</li>
<li>Немного javascript'а.</li>
</ul>

</section></div></div>

    <div class="slide" id="slide-162"><div><section>

<header><h2>Run</h2></header>

<p>test.js:</p>

<pre><code>console.log( 'Hello' );
</code></pre>

<p>Запускаем:</p>

<pre><code>&gt; node test.js
Hello
</code></pre>

</section></div></div>

    <div class="slide" id="slide-163"><div><section>

<header><h2>Modules</h2></header>

<pre><code>//  foo.js

var foo = 42;

module.exports.get_foo = function() {
    return foo;
};

module.exports.bar = 24;
</code></pre>

<p>--</p>

<header><h2>Modules</h2></header>

<pre><code>//  bar.js

var foo = require( './foo.js' ).get_foo;
var bar = require( './foo.js' ).bar;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-164"><div><section>

<header><h2>Modules</h2></header>

<pre><code>var foo = require( './foo.js' );
foo.get_foo()               //  42

require( './foo.js' ).bar   //  24
</code></pre>

</section></div></div>

    <div class="slide" id="slide-165"><div><section>

<header><h2>Modules</h2></header>

<pre><code>var foo = 42;

module.exports = {
    get_foo: function() { return foo; },
    bar: 24
};
</code></pre>

</section></div></div>

    <div class="slide" id="slide-166"><div><section>

<header><h2>Modules</h2></header>

<pre><code>var ns = {};

ns.foo = 42;
ns.bar = function() { ... };

module.exports = ns;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-167"><div><section>

<header><h2>Modules</h2></header>

<pre><code>module.exports = function() {
    return 42;
};

//  module.exports = 42;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-168"><div><section>

<header><h2>Modules</h2></header>

<pre><code>function Foo() {};

Foo.prototype.get_foo = function() { return this.foo; }

module.exports = Foo;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-169"><div><section>

<header><h2>Modules</h2></header>

<pre><code>//  random.js
module.exports = Math.random();

//  main.js
var a = require( './random.js' );
var b = require( './random.js' );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-170"><div><section>

<header><h2>require</h2></header>

<pre><code>var fs = require( 'fs' );
var no = require( 'nommon' );
var config = require( '/etc/autoru/resources.json' );
var foo = require( '/usr/lib/foo/foo.js' );
var bar = require( '../bar/bar.js' );
//  var quu = require( 'quu.js' );
var quu = require( './quu.js' );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-171"><div><section>

<header><h2>npm</h2></header>

<pre><code>npm install nommon
npm install -g nommon

node_modules/nommon/lib/...
</code></pre>

</section></div></div>

    <div class="slide" id="slide-172"><div><section>

<header><h2>nop's modules</h2></header>

<pre><code>//  no.js
var no = {};

module.exports = no;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-173"><div><section>

<header><h2>nop's modules</h2></header>

<pre><code>//  no.events.js
var no = require( './no.js' );

no.events = {};
no.events.on = function() { ... };

module.exports = no;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-174"><div><section>

<header><h2>nop's modules</h2></header>

<pre><code>//  index.js
var no = require( './no.js' );

require( './no.events.js' );
require( './no.promise.js' );
...

module.exports = no;
</code></pre>

</section></div></div>

    <div class="slide" id="slide-175"><div><section>

<header><h2>nop's modules</h2></header>

<pre><code>//  no.foo.js
var no = require( './no.js' );
no.foo = {};
...
no.foo.get = function() {
    var bar = no.bar.get();
    ...
};
</code></pre>

</section></div></div>

    <div class="slide" id="slide-176"><div><section>

<header><h2>nop's modules</h2></header>

<pre><code>//  no.bar.js
var no = require( './no.js' );
no.bar = {};
...
no.bar.set = function() {
    no.foo.set();
    ...
};
</code></pre>

</section></div></div>

    <div class="slide" id="slide-177"><div><section>

<header><h2>nop's modules</h2></header>

<pre><code>//  main.js

require( './no.foo.js' );
require( './no.bar.js' );

...
</code></pre>

</section></div></div>

    <div class="slide" id="slide-178"><div><section>

<header><h2>Core modules</h2></header>

<pre><code>fs              crypto
http            cluster
https           events
path            querystring
url
</code></pre>

</section></div></div>

    <div class="slide" id="slide-179"><div><section>

<header><h2>fs</h2></header>

<pre><code>var fs_ = require( 'fs' );

fs_.readFile( 'foo.txt', 'utf-8', function( err, data ) {
    if ( err ) {
        throw err;
    }
    console.log( data );
} );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-180"><div><section>

<header><h2>fs</h2></header>

<pre><code>try {
    var data = fs_.readFileSync( 'foo.txt', 'utf-8' );
} catch ( e ) {
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-181"><div><section>

<header><h2>fs</h2></header>

<pre><code>var data = require( 'foo.json' );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-182"><div><section>

<header><h2>path</h2></header>

<pre><code>var path_ = require( 'path' );

var rel_path = 'foo.txt';
var abs_path = path_.resolve( process.cwd(), rel_path );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-183"><div><section>

<header><h2>path</h2></header>

<pre><code>path_.dirname( path );
path_.extname( path );
path_.join( path1, path2, ... );
path_.relative( from_path, to_path );
...
</code></pre>

</section></div></div>

    <div class="slide" id="slide-184"><div><section>

<header><h2>Buffer</h2></header>

<pre><code>//  var data = fs_.readFileSync( 'foo.txt', 'utf-8' );
var data = fs_.readFileSync( 'foo.txt' );

typeof data                 //  'object'
data instanceof Buffer      //  true
Buffer.isBuffer( data )     //  true
</code></pre>

</section></div></div>

    <div class="slide" id="slide-185"><div><section>

<header><h2>Buffer</h2></header>

<pre><code>Buffer.byteLength( 'привет' )   //  12
'привет'.length             //  6
</code></pre>

</section></div></div>

    <div class="slide" id="slide-186"><div><section>

<header><h2>http</h2></header>

<pre><code>http_.request( 'http://auto.ru', function( res ) {
    var data = '';
    res.on( 'data', function( chunk ) {
        data += chunk;
    } );
    res.on( 'end', function() {
        console.log( data );
    }
} );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-187"><div><section>

<header><h2>http</h2></header>

<pre><code>http_.request( 'http://auto.ru', function( res ) {
    var chunks = [], l = 0;
    res.on( 'data', function( chunk ) {
        chunks.push( chunk ); l += chunk.length;
    } );
    res.on( 'end', function() {
        var result = Buffer.concat( chunks, l );
    }
} );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-188"><div><section>

<header><h2>http</h2></header>

<pre><code>var server = http_.createServer( function( req, res ) {
    if ( req.url = '/hello' ) {
        res.statusCode = 200;
        res.setHeader( 'Content-Type', 'text/html' );
        res.write( '&lt;h1&gt;Hello&lt;/h1&gt;' );
        res.end();
    }
} );
server.listen( 8080 );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-189"><div><section>

<header><h2>events</h2></header>

<pre><code>var EventEmitter = require( 'events' );

var ee = new EventEmitter();
ee.on( 'foo', console.log );
ee.emit( 'foo', 42 );       //  true
ee.emit( 'bar', 24 );       //  false

ee.emit( 'error', 'boo' );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-190"><div><section>

<header><h2>events</h2></header>

<pre><code>var Foo = function( foo ) { this.foo = foo; };
util.inherits( Foo, EventEmitter );

var foo = new Foo( 42 );
foo.on( 'foo', function( foo ) {
    this.foo = foo;
} );
foo.emit( 24 );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-191"><div><section>

<header><h2>Stream</h2></header>

<pre><code>foo.on( 'data', function( data ) {
    ...
} );
foo.on( 'end', function() {
    ...
} );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-192"><div><section>

<header><h2>Stream</h2></header>

<pre><code>foo.write( data1 );
foo.write( data2 );
foo.end();
</code></pre>

</section></div></div>

    <div class="slide" id="slide-193"><div><section>

<header><h2>Stream</h2></header>

<pre><code>var r = fs_.createReadStream( 'foo.txt' );
var w = fs_.createWriteStream( 'bar.txt' );

r.pipe( w );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-194"><div><section>

<header><h2>url</h2></header>

<pre><code>var parsed = url_.parse( 'http://moscow.auto.ru' +
    '/cars/audi/tt/all/?output_type=list', true );
{
    protocol: 'http:',
    host: 'moscow.auto.ru',
    path: '/cars/audi/tt/all/',
    query: { output_type: 'list' }
    ...
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-195"><div><section>

<header><h2>url</h2></header>

<pre><code>var url = url.format( parsed );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-196"><div><section>

<header><h2>cluster</h2></header>

<pre><code>if ( cluster_.isMaster ) {
    cluster_.fork();
} else {
    http_.createServer( function( req, res ) {
        res.writeHead( 200 );
        res.end( 'Hello' );
    } ).listen( 8000 );
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-197"><div><section>

<header><h2>cluster</h2></header>

<pre><code>if ( cluster_.isMaster ) {
    var num_cpus = require( 'os' ).cpus().length;
    for ( var i = 0; i &lt; num_cpus - 1; i++ ) {
        cluster_.fork();
    }
    cluster.on( 'exit', function( worker ) {
        console.log( 'Worker ' + worker.process.pid + ' died' );
        cluster_.fork();
    } );
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-198"><div><section>

<header><h2>process</h2></header>

<pre><code>process.stdout      process.nextTick()
process.stdin       process.exit()
process.stderr      process.hrtime()
process.argv        process.pid
process.env         ...
process.cwd()
</code></pre>

</section></div></div>

    <div class="slide" id="slide-199"><div><section>

<header><h2>Promise</h2></header>

<pre><code>//  Не работает.
var result = fs_.readFile( filename );

fs_.readFile( filename, function( error, result ) {
    console.log( result );
} );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-200"><div><section>

<header><h2>Promise</h2></header>

<pre><code>var promise = read_file( filename );

promise.then( function( result ) {
    console.log( result );
} );
and_then( promise );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-201"><div><section>

<header><h2>Promise</h2></header>

<pre><code>function and_then( promise ) {
    promise.then( function( result ) {
        process_result( result );
    } );
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-202"><div><section>

<header><h2>Promise</h2></header>

<pre><code>function read_file( filename ) {
    return new Promise( function( resolve, reject ) {
        fs_.readFile( function( error, result ) {
            if ( error ) {
                reject( error );
            } else {
                resolve( result );
            }
        } );
    } );
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-203"><div><section>

<header><h2>Promise</h2></header>

<pre><code>function read_file( filename ) {
    var promise = no.promise();
    fs_.readFile( function( error, result ) {
        if ( error )
            promise.reject( error );
        else
            promise.resolve( result );
    } );
    return promise;
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-204"><div><section>

<header><h2>Promise</h2></header>

<pre><code>promise.then(
    function( result ) { ... },
    function( error ) { ... }
);

promise.then( on_resolve );
promise.then( null, on_reject );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-205"><div><section>

<header><h2>Promise</h2></header>

<pre><code>read_file( 'foo.txt' )
    .then( function( foo ) {
        read_file( 'bar.txt' )
            .then( function( bar ) {
                console.log( foo, bar );
            } );
    } );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-206"><div><section>

<header><h2>Promise</h2></header>

<pre><code>var promise = read_file( 'foo.txt' )
    .then( function() {
        return read_file( 'bar.txt' );
    } );

promise.then( function() {
        console.log( 'done' );
    } );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-207"><div><section>

<header><h2>Promise</h2></header>

<pre><code>read_file( 'foo.txt' )
    .then( function() {
        return read_file( 'bar.txt' );
    } )
    .then( function() {
        console.log( 'done' );
    } );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-208"><div><section>

<header><h2>Promise</h2></header>

<pre><code>Promise.all( [
    read_file( 'foo.txt' ),
    read_file( 'bar.txt' )
] )
    .then( function( results ) {
        console.log( 'foo', results[ 0 ] );
        console.log( 'bar', results[ 1 ] );
    } );
</code></pre>

</section></div></div>

    <div class="slide" id="slide-209"><div><section>

<header><h2>Promise</h2></header>

<pre><code>var _cache = {};

function cached_read_file( filename ) {
    var cached = _cache[ filename ];
    if ( !cached ) {
        cached = _cache[ filename ] = read_file( filename );
    }
    return cached;
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-210"><div><section>

<header><h2>Debug</h2></header>

<ul>
<li><code>console.log()</code></li>
<li><code>node debug</code></li>
<li><code>node-inspector</code></li>
</ul>

</section></div></div>

    <div class="slide" id="slide-211"><div><section>

<header><h2>node debug</h2></header>

<pre><code>node debug test.js

function add( a, b ) {
    debugger;

    return a + b;
}
</code></pre>

</section></div></div>

    <div class="slide" id="slide-212"><div><section>

<header><h2>node-inspector</h2></header>

<pre><code>npm install -g node-inspector

node-debug test.js
</code></pre>
</section></div></div>


    <script src="../core/shower.js"></script>
</body>
</html>
