<!doctype html>
<html lang="en-us">
<head>
    <title>Yate</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=1274, user-scalable=no"/>
    <link rel="stylesheet" href="shower/themes/ribbon/styles/style.css"/>
    <style>
    .slide:after, .slide pre code:before {
        content: '';
    }
    .slide section:before {
        background: none;
    }
    </style>
</head>

<body class="list">
    <header class="caption">
        <h1>yet another template engine</h1>
    </header>

    <div class="slide" id="slide-1"><div><section><header><h2>JPath</h2></header>
<ul>
<li>Аналог <code>XPath</code> в <code>XSLT</code>.</li>
<li>Более javascript'овый синтаксис.</li>
</ul>
</section></div></div>

    <div class="slide" id="slide-2"><div><section>
<header><h2>JPath. Примеры</h2></header>
<pre><code>yate                        xpath

.                           .
.foo                        foo
.*                          *
.foo.bar                    foo/bar
..                          ..
...                         ../..
...foo.bar                  ../../foo/bar
</code></pre>
</section></div></div>

    <div class="slide" id="slide-3"><div><section>
<header><h2>JPath. Предикаты</h2></header>
<pre><code>yate                        xpath

.item[ .count || .title ]   item[ count or title ]
.item[ .selected ]          item[ selected ]
.item[ .count &gt; 5 ]         item[ count &amp;gt; 5 ]
.item[ !.selected ]         item[ not(selected) ]

.*[ name() == 'item' ]      *[ name() = 'item' ]
</code></pre>
</section></div></div>

    <div class="slide" id="slide-4"><div><section>
<header><h2>JPath. Операторы</h2></header>
<pre><code>yate    xpath               yate    xpath

&lt;       &amp;lt;                &lt;=      &amp;lt;
&gt;       &amp;gt;                &gt;=      &amp;gt;
==      =
!=      !=
</code></pre>
</section></div></div>

    <div class="slide" id="slide-5"><div><section>
<header><h2>JPath. Операторы</h2></header>
<pre><code>yate    xslt                yate    xslt

+       +                   &amp;&amp;      and
-       -                   ||      or
*       *                   !       not()
/       div
%       mode                |       |
</code></pre>
</section></div></div>

    <div class="slide" id="slide-6"><div><section>
<header><h2>JPath. Оператор <code>|</code></h2></header>
<p>Работает не так, как в <code>XPath</code>:</p>
<pre><code>.item[ .selected ] | .item[ .count &gt; 5 ]
</code></pre>
<p>Просто склеивает результаты двух (или более) <code>jpath</code>-ов:</p>
<ul>
<li>Могут быть дубли.</li>
<li>Порядок нод в результате может быть отличным от исходного.</li>
</ul>
</section></div></div>

    <div class="slide" id="slide-7"><div><section>
<header><h2>Шаблоны</h2></header>
<pre><code>match / content {
    &lt;h1&gt;Hello, { .username }&lt;/h1&gt;
}
</code></pre>
<ul>
<li>Ключевое слово <code>match</code>.</li>
<li>Селектор: <code>/</code> или <code>jpath</code>.</li>
<li>Мода (опционально).</li>
<li>Тело шаблона <code>{ ... }</code>.</li>
</ul>
</section></div></div>

    <div class="slide" id="slide-8"><div><section>
<header><h2>Шаблоны</h2></header>
<p>То же самое в <code>XSLT</code>:</p>
<pre><code>&lt;xsl:template match="/" mode="content"&gt;
    &lt;h1&gt;
        &lt;xsl:text&gt;Hello, &lt;/xsl:text&gt;
        &lt;xsl:value-of select="username"/&gt;
    &lt;/h1&gt;
&lt;/xsl:template&gt;
</code></pre>
</section></div></div>

    <div class="slide" id="slide-9"><div><section>
<header><h2>Шаблоны. Селекторы</h2></header>
<pre><code>match / { ... }
match .items.item[ .selected ] { ... }
</code></pre>
<p>Неправильно:</p>
<pre><code>//  FIXME: Сделать абсолютные jpath'ы.
match /.items { ... }
match .. { ... }
</code></pre>
</section></div></div>

    <div class="slide" id="slide-10"><div><section>
<header><h2>Шаблоны. Содержимое</h2></header>
<ul>
<li>Выражения</li>
<li>Определения</li>
</ul>
</section></div></div>

    <div class="slide" id="slide-11"><div><section>
<header><h2>Шаблоны. Выражения</h2></header>
<ul>
<li><code>xml</code>-строки</li>
<li>Текстовые строки</li>
<li>Значения</li>
<li><code>xml</code>-атрибуты</li>
<li><code>if</code>, <code>for</code>, <code>apply</code></li>
</ul>
</section></div></div>

    <div class="slide" id="slide-12"><div><section>
<header><h2>Выражения. XML-строки</h2></header>
<pre><code>match / {
    &lt;h1&gt;Hello, { .username }&lt;/h1&gt;
    &lt;div class="content" id="id-{ .id }"&gt;
        .content
    &lt;/div&gt;
}
</code></pre>
</section></div></div>

    <div class="slide" id="slide-13"><div><section>
<header><h2>Выражения. XML-строки</h2></header>
<p>Длинные строки можно переносить:</p>
<pre><code>&lt;img src="http://yandex.st/logo.png"
    width="95" height="37"/&gt;
</code></pre>
<p>Теги <code>img</code>, <code>br</code>, <code>input</code> и др. выводятся в режиме html.</p>
</section></div></div>

    <div class="slide" id="slide-14"><div><section>
<header><h2>Выражения. Текстовые строки</h2></header>
<p>Аналог <code>xsl:text</code> с интерполяцией:</p>
<pre><code>match / {
    "Hello"
    "Hello, { .username }"
}
</code></pre>
<p>Одинарные кавычки и двойные — одно и тоже.</p>
</section></div></div>

    <div class="slide" id="slide-15"><div><section>
<header><h2>Выражения. Значения</h2></header>
<p>Аналог <code>xsl:value-of</code>:</p>
<pre><code>match / {
    &lt;div class="content"&gt;
        .content
    &lt;/div&gt;
}
</code></pre>
<p>Это может быть <code>jpath</code>, значение переменной,
и вообще произвольное инлайновое выражение.</p>
</section></div></div>

    <div class="slide" id="slide-16"><div><section>
<header><h2>Выражения. Значения</h2></header>
<pre><code>answer = 42

match / {
    .content
    .count + 1
    answer
    getTitle()
}
</code></pre>
</section></div></div>

    <div class="slide" id="slide-17"><div><section>
<header><h2>Выражения. XML-атрибуты</h2></header>
<p>Неполный аналог <code>xsl:attribute</code>:</p>
<pre><code>match / {
    &lt;div&gt;
        @class = "hello"
        "Hello"
    &lt;/div&gt;
}
</code></pre>
</section></div></div>

    <div class="slide" id="slide-18"><div><section>
<header><h2>Выражения. XML-атрибуты</h2></header>
<pre><code>match / {
    &lt;div class="hello"&gt;
        if .title {
            @title = .title
        }
    &lt;/div&gt;
}
</code></pre>
</section></div></div>

    <div class="slide" id="slide-19"><div><section>
<header><h2>Выражения. XML-атрибуты</h2></header>
<pre><code>match / {
    &lt;div class="hello"&gt;
        if .username {
            @class += " username"
        }
    &lt;/div&gt;
}
</code></pre>
<p>Временный синтаксис.</p>
</section></div></div>

    <div class="slide" id="slide-20"><div><section>
<header><h2>Выражения. XML-атрибуты</h2></header>
<p>Скорее всего, будет так:</p>
<pre><code>match / {
    &lt;div class="hello"&gt;
        if .username {
            @class = "{ @class } username"
        }
    &lt;/div&gt;
}
</code></pre>
</section></div></div>

    <div class="slide" id="slide-21"><div><section>
<header><h2>Выражения. XML-атрибуты</h2></header>
<pre><code>match / {
    &lt;div&gt;
        apply . class
    &lt;/div&gt;
}

match / class {
    @class = "hello"
}
</code></pre>
</section></div></div>

    <div class="slide" id="slide-22"><div><section>
<header><h2>Выражения. XML-атрибуты</h2></header>
<pre><code>match / {
    attrs = (
        @width = 42
        @height = 24
    )

    &lt;img src="logo.png"&gt;
        attrs
    &lt;/img&gt;
}
</code></pre>
</section></div></div>

    <div class="slide" id="slide-23"><div><section>
<header><h2>Выражения. XML-атрибуты</h2></header>
<p>В планах:</p>
<pre><code>match / {
    name = "class"

    @{ name } = "hello"
}
</code></pre>
</section></div></div>

    <div class="slide" id="slide-24"><div><section>
<header><h2>Выражения. <code>if</code></h2></header>
<p>Аналог <code>xsl:if</code> и <code>xsl:choose</code>:</p>
<pre><code>&lt;span class="count"&gt;
    if .count &gt; 5 {
        .count
    } else {
        5
    }
&lt;/span&gt;
</code></pre>
</section></div></div>

    <div class="slide" id="slide-25"><div><section>
<header><h2>Выражения. <code>for</code></h2></header>
<p>Аналог <code>xsl:for-each</code>:</p>
<pre><code>&lt;ul&gt;
    for .items.item {
        &lt;li&gt;{ .title }&lt;/li&gt;
    }
&lt;/ul&gt;
</code></pre>
</section></div></div>

    <div class="slide" id="slide-26"><div><section>
<header><h2>Выражения. <code>apply</code></h2></header>
<p>Аналог <code>xsl:apply-templates</code>:</p>
<pre><code>match / {
    apply .page title
    apply .page
}
</code></pre>
</section></div></div>

    <div class="slide" id="slide-27"><div><section>
<header><h2>Выражения. <code>apply</code></h2></header>
<p>Первый аргумент <code>apply</code> любой <code>nodeset</code>,
не обязательно <code>jpath</code>:</p>
<pre><code>match / {
    items = .items.item
    apply items
    apply .title | .subtitle
    apply items()
}
</code></pre>
</section></div></div>

    <div class="slide" id="slide-28"><div><section>
<header><h2>Выражения. <code>apply</code></h2></header>
<p>Можно передать параметр(ы):</p>
<pre><code>match / {
    apply .page title ( .title )
}

match .page title ( title = "Hello" ) {
    &lt;h1&gt;{ title }&lt;/h1&gt;
}
</code></pre>
</section></div></div>

    <div class="slide" id="slide-29"><div><section>
<header><h2>Выражения</h2></header>
<p><code>if</code>, <code>for</code>, <code>apply</code> — выражения.</p>
<pre><code>title = if .title {
    .title
} else {
    "Hello"
}

&lt;h1&gt;{ title }&lt;/h1&gt;
</code></pre>
</section></div></div>

    <div class="slide" id="slide-30"><div><section>
<header><h2>Всё</h2></header>
<ul>
<li><a href="http://git.io/yate">git.io/yate</a> — проект <code>yate</code> на github'е.</li>
<li><a href="http://git.io/nop">git.io/nop</a> — все мои проекты.</li>
</ul></section></div></div>


    <script src="shower/scripts/script.js"></script>
</body>
</html>
